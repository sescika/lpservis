var url=window.location.pathname;function ajaxCallback(a,e){$.ajax({url:"assets/data/"+a,method:"get",dataType:"json",success:e,error:function(a,e){var i="";alert(i=0===a.status?"Not connected.\n Verify Network.":404==a.status?"Requested page not found. [404]":500==a.status?"Internal Server Error [500].":"parsererror"===e?"Requested JSON parse failed.":"timeout"===e?"Time out error.":"abort"===e?"Ajax request aborted.":"Uncaught Error.\n"+a.responseText)}})}url=url.substring(url.lastIndexOf("/")),window.onload=function(){if(brProizvodaUkorpi(),("/"==url||"/index.html"==url)&&ajaxCallback("proizvodi.json",function(a){ispisDijagnostika(),ispisSlider(a),ispisPodrska()}),"/products.html"==url&&(ajaxCallback("sort-opcije.json",function(a){ispisDDl(a,"ddlSort","ddlSortDiv","sort")}),ajaxCallback("proizvodi.json",function(a){ispisProizvoda(a),lsSet("proizvodi",a)}),ajaxCallback("proizvodjaci.json",function(a){ispisGrupeFilterCheckboxova(a,"Proizvođači:","filterProizvodjaci","input-proizvodjaci"),lsSet("proizvodjaci",a)}),ajaxCallback("proizvodjaci-procesori.json",function(a){ispisGrupeFilterCheckboxova(a,"Procesor:","filterProcesori","input-procesori"),lsSet("proizvodjaciProcesora",a)}),ajaxCallback("proizvodjaci-graficke.json",function(a){ispisGrupeFilterCheckboxova(a,"Grafička kartica:","filterGraficke","input-graficke"),lsSet("proizvodjaciGraficke",a)}),$(document).on("change","#ddlSort",onPromena),$(document).on("change","#tbSearch",onPromena),$(document).on("change",".form-check-input",onPromena),$(document).on("click","#btnSearch",onPromena),$(document).on("click","#btnClearSearch",clearTb)),"/contact.html"==url){ispisKontakt(),ajaxCallback("dostupni-gradovi.json",function(a){ispisDDl(a,"ddlGradovi","ddlGradoviDiv","gradovi")}),ajaxCallback("proizvodjaci.json",function(a){ispisDDl(a,"ddlProizvodjaci","ddlProizvodjaciDiv","proizvodjaci")});document.getElementById("btnFormaSubmit").addEventListener("click",proveraForme)}"/cart.html"==url&&(ispisKorpe(),$(document).on("click",".btnSmanji",smanji),$(document).on("click",".btnPovecaj",povecaj),$(document).on("click","#btnOsveziKorpu",osveziKorpu))};const navNizHref=["index.html","products.html","contact.html","author.html"],navNizTitle=["Početna","Proizvodi","Pošaljite tiket","Autor"],footerKlaseIkonice=["fa-solid fa-sitemap","fa-regular fa-file","fa-brands fa-instagram","fa-regular fa-user"],footerTitles=["Sitemap","Dokumentacija","Instagram","Portfolio"],footerHref=["sitemap.xml","documentation.pdf","https://www.instagram.com","https://sescika.github.io/portfolio/"];let nav=document.getElementById("navbarNav"),navfooter=document.getElementById("footerNavbar"),navFooterIcons=document.getElementById("footerLinks");function prikazNav(a,e,i,t){let o="";if(o+="<ul class='navbar-nav ms-auto'>","nav"===t){for(let r in a)o+=`<li class="nav-item ms-4">  
                        <a class="nav-link" href="${a[r]}">${e[r]}</a>
                    </li>`;o+=`   <a href='cart.html' class='btn border text-light ms-0 ms-lg-3'>
                        <i class='fa-solid fa-cart-shopping'></i>
                        <span id='cartItemsCounter'></span>
                    </a>
                </ul>`}if("footer"===t){for(let n in a)o+=`<li class="nav-item ms-4">
                        <a class="nav-link" href="${a[n]}">${e[n]}</a>
                    </li>`;o+="</ul>"}i.innerHTML=o}function prikazIkonice(a,e,i,t){let o="";for(let r in o+="<ul class='navbar-nav'>",a)o+=`<li class="nav-item">
                    <a class="nav-link" href="${i[r]}" target="_blank"><i class='${a[r]}'></i> ${e[r]}</a>
                </li>`;o+="</ul>",t.innerHTML=o}function ispisDijagnostika(){let a=`<div class="row">
                    <div class="col-12 col-lg-6">
                        <img src="assets/img/index-serviser.jpg" alt="laptop serviser" class="img-fluid" />
                    </div>
                    <div class="col-12 col-lg-6">
                        <h3>Besplatna dijagnostika kvara</h3>
                        <hr />
                        <p>Dijagnostika kvara za sve modele laptopova je Besplatna.</p>
                        <p>Dijagnostika traje 1 radni sat od kada donesete vaš laptop kod nas.</p>
                        <p>Dijagnostiku rade visokokvalifikovani laptop tehničari sa velikim iskustom u popravci laptop uredjaja i propratne opreme.</p>
                        <p>Naša dijagnostika je temeljna i precizna, dijagnostika se radi sa najsavremenijim dijagnostičkim alatima za popravku laptopova kao i najsavremenijim elektronskim.</p>
                    </div>
                </div>`;document.getElementById("tehnicar").innerHTML=a}function ispisPodrska(){let a=`<div class="row">
                    <div class="col-12 col-lg-6 mb-3">
                        <h3>Besplatna tehnička podrška</h3>
                        <hr>
                        <p>Od početka ove godine smo unapredili tehničku podršku za sve laptop uredjaje 24 časa. Ukoliko imate bilo kakvih pitanja u vezi vašeg laptopa Apple HP Asus Acer Lenovo ili nekog drugog proizvođača pozovite naše laptop tehničare za pomoć.</p>
                        <p>Naši tehničari rešavaju sve softverske i hardverske probleme:</p>
                        <ul>
                            <li>Ne možete da se povežet na internet.</li>
                            <li>Laptop se pali ali nema sliku na ekranu.</li>
                            <li>Na laptopu nema zvuka.</li>
                            <li>Laptop se pali ali pišti nekoliko puta.</li>
                            <li>...</li>
                        </ul>
                        <p>Osim unapredjene tehničke službe unapredili smo i brzu hitnu službu koji radi 24 časa. Ukoliko vam se laptop pokvari u toku noći a želite trenutnu popravku vašeg uredjaja pozovite našu Hitnu službu. Naši tehničari ce doći po vaš računar i započinju odmah popravku. Ukoliko nisu u mogućnosti da za kratko vreme reše problem daju vam drugi ispravan laptop dok je vaš u servisu.</p>
                        <a class="btn btn-secondary" href="contact.html">Kontakt forma</a>
                    </div>
                    <div class="col-12 col-lg-6">
                        <img src="assets/img/index-support.jpg" alt="laptop serviser" class="img-fluid" />
                    </div>
                </div>`;document.getElementById("podrska").innerHTML=a}function nizProizvodaNaAkciji(a){let e=[];for(let i of a)i.akcija&&e.push(i);return e}function ispisSlider(a){let e=nizProizvodaNaAkciji(a),i=`
    <h3 class='text-center text-warning py-3'>Pogledajte neke od proizvoda na akciji</h3>
    <hr />
    <div id="carousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <a href="products.html"><img src="${e[0].slika.src}" class="d-block w-100" alt="${e[0].slika.alt}"></a>
                <div class="carousel-caption d-none d-md-block text-dark ">
                    <hr />
                    <h5>${e[0].nazivProizvoda}</h5>
                </div>
            </div>`;for(let t=1;t<=e.length-1;t++)i+=`
        <div class="carousel-item">
            <a href="products.html"><img src="${e[t].slika.src}" class="d-block w-100" alt="${e[t].slika.alt}"></a>
            <div class="carousel-caption d-none d-md-block text-dark">
                <hr />
                <h5>${e[t].nazivProizvoda}</h5>
            </div>
        </div>`;i+=`</div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>`,document.getElementById("autoCarousel").innerHTML=i}function onPromena(){ispisProizvoda(lsGet("proizvodi"))}function ispisProizvoda(a){let e="<div class='row d-flex justify-content-around'>";a=searchProizvodi(a=sortProizvodi(a=filterProizvodjaci(a=filterGraficke(a=filterProcesori(a)))));let i=1;for(let t of a)e+=`<div class='card product bg-light my-3 col-12 col-lg-4'>
                    <img src=${t.slika.src} class='card-img-top' alt=${t.slika.alt} />`,t.akcija&&(e+='<span class="position-absolute p-2 m-2 top-0 end-0 badge rounded bg-danger">Akcija</span>'),e+=`
                        <div class='card-body'>
                            <h5 class='card-title'>${t.nazivProizvoda}</h5>
                            <hr />
                        <div class='price'>`,0===t.cena.staraCena?e+="<p> </p>":e+=`<p class='text-secondary m-0 staraCena'>Stara cena: ${obradaCene(t.cena.staraCena)}</p>`,e+=`<p class=' fw-bold trenutnaCena'>${obradaCene(t.cena.trenutnaCena)}</p>
                        </div>
                        <div class="add-to-cart">
                            <button onclick="addToCart(${i})" class="btn btn-secondary btn-addtocart"><i class="fa fa-shopping-cart"></i> Dodaj u korpu</button>
                        </div>
                    </div>
                </div>
        `,i++;e+="</div>",document.getElementById("products").innerHTML=e}function ispisGrupeFilterCheckboxova(a,e,i,t){html=`<div class='aside border rounded p-2 mb-3' id='${i}'>
                <h5 class='aside-title'>${e}</h5>
                    <hr />
                    `;let o=1;for(let r of a)html+=`<div class='mb-2'>
                    <input class="form-check-input mt-0 ${t}" type="checkbox" value='${o}' id='${i+o}' /> 
                    <label for='${i+o}'>${r.imeProizvodjaca}</label>
                    </div>`,o++;html+="</div>",document.getElementById("filters").innerHTML+=html}function ispisDDl(a,e,i,t){let o=`
                    <select class="form-select" id="${e}">
                        <option value="0">Izaberite opciju</option>`;for(let r of a)"sort"==t&&(o+=`<option value="${r.vrednost}">${r.naziv}</option>`),"gradovi"==t&&(o+=`<option value="${r.id}">${r.imeGrada}</option>`),"proizvodjaci"==t&&(o+=`<option value="${r.id}">${r.imeProizvodjaca}</option>`);o+=`</select>
           `,document.querySelector(`#${i}`).innerHTML+=o}function obradaCene(a){var e=a.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),e.join(",")+" RSD"}function lsSet(a,e){localStorage.setItem(a,JSON.stringify(e))}function lsGet(a){return JSON.parse(localStorage.getItem(a))}function sortProizvodi(a){let e=[],i=$("#ddlSort").val();return"0"==i?a:a.sort(function(a,e){return"cena-asc"==i?a.cena.trenutnaCena-e.cena.trenutnaCena:"cena-desc"==i?e.cena.trenutnaCena-a.cena.trenutnaCena:"naziv-asc"==i?a.nazivProizvoda<e.nazivProizvoda?-1:a.nazivProizvoda>e.nazivProizvoda?1:0:"naziv-desc"==i?a.nazivProizvoda>e.nazivProizvoda?-1:a.nazivProizvoda<e.nazivProizvoda?1:0:void 0})}function searchProizvodi(a){let e=$("#tbSearch").val();return a.filter(a=>{if(-1!=a.nazivProizvoda.toLowerCase().indexOf(e.toLowerCase().trim()))return a})}function filterGraficke(a){let e=[];for(let i=0;i<$(".input-graficke:checked").length;i++)e.push(parseInt($(".input-graficke:checked")[i].value));return 0!=e.length?a.filter(a=>e.includes(a.specifikacije.grafickaKartica.proizvodjacGrafickeKarticeId)):a}function filterProcesori(a){let e=[];for(let i=0;i<$(".input-procesori:checked").length;i++)e.push(parseInt($(".input-procesori:checked")[i].value));return 0!=e.length?a.filter(a=>e.includes(a.specifikacije.procesor.proizvodjacProcesoraId)):a}function filterProizvodjaci(a){let e=[];for(let i=0;i<$(".input-proizvodjaci:checked").length;i++)e.push(parseInt($(".input-proizvodjaci:checked")[i].value));return 0!=e.length?a.filter(a=>e.includes(a.proizvodjacId)):a}function clearTb(){let a=lsGet("proizvodi");document.getElementById("tbSearch").value="",ispisProizvoda(a)}prikazNav(navNizHref,navNizTitle,nav,"nav"),prikazNav(navNizHref,navNizTitle,navfooter,"footer"),prikazIkonice(footerKlaseIkonice,footerTitles,footerHref,navFooterIcons);const alertPlaceholder=document.getElementById("liveAlertPlaceholder"),alert=(a,e)=>{let i=document.createElement("div");i.innerHTML=`<div class="alert alert-${e} alert-dismissible" role="alert">   <div>${a}</div>   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>`,alertPlaceholder.append(i)};let proizvodiUnutarKorpe=[];function addToCart(a,e){var i,t,o;if(void 0==e&&(e=1),localStorage.getItem("korpa")){let r,n,s,l;lsGet("korpa").find(e=>e.id==a)?(i=a,r=lsGet("korpa"),n=r.find(a=>a.id==i),r.forEach(a=>{a.id==n.id&&alert("Proizvod je vec u korpi.","danger")})):(s={id:t=a,kolicina:e},(l=lsGet("korpa")).push(s),brProizvodaUkorpi(),alert("Proizvod dodat u korpu.","success"),lsSet("korpa",l),brProizvodaUkorpi())}else{let d;d={id:o=a,kolicina:e},proizvodiUnutarKorpe.push(d),alert("Proizvod dodat u korpu.","success"),lsSet("korpa",proizvodiUnutarKorpe),brProizvodaUkorpi(),brProizvodaUkorpi()}}function ispisPrazneKorpe(){html=`
            <div>
                <h3 class='my-5 text-center'>Nema proizvoda u korpi.</h3>
            </div>`,document.getElementById("korpaTabela").innerHTML=html,document.getElementById("divfinalno").innerHTML="",document.getElementById("divfinalno").classList.remove("bg-light","border")}function ispisKorpe(){let a=lsGet("korpa"),e=lsGet("proizvodi"),i="";if(0==brProizvodaUkorpi()||null==a)localStorage.removeItem("korpa"),ispisPrazneKorpe();else{i=`<table class="table table-striped border">
        <thead class="table-header text-light bg-dark text-center">
            <tr>
                <th> </th>
                <th>Naziv Proizvoda</th>
                <th>Cena</th>
                <th>Količina</th>
                <th>Končna cena</th>
                <th> </th>
            </tr>
        </thead>
        <tbody>`;let t=0;for(let o of e)for(let r of a)o.id==r.id&&(i+=` <tr>
                                <td>
                                    <img class="img-fluid slika-korpa" src="${o.slika.src}" alt="${o.slika.alt}" />
                                </td>
                                <td class="align-middle text-center">${o.nazivProizvoda}</td>
                                <td class="align-middle text-center" id="cenaKomad${r.id}">${obradaCene(o.cena.trenutnaCena)}</td>
                                <td class="align-middle text-center">
                                    <div class="cartKolicina">
                                        <button id="smanji${r.id}" onclick="smanji(${r.id})" data-id="${r.id}" class='btn btn-secondary btnSmanji'>-</button>
                                            <input type='text' name='korpaProizvodKolicina${r.id}' class='btn btn-secondary' id='korpaProizvodKolicina${r.id}' disabled='disabled' size='1' value='${r.kolicina}' />
                                        <button id="povecaj${r.id}" onclick="povecaj(${r.id})" data-id="${r.id}" class='btn btn-secondary btnPovecaj'>+</button>
                                    </div>
                                </td>
                                <td class="align-middle text-center" id="ukupnaCena${r.id}">${obradaCene(o.cena.trenutnaCena*r.kolicina)}</td>
                                <td class="align-middle text-center">
                                <div class="cartIzbaci">
                                    <button onclick="izbrisiProizvod(${r.id})" class="btn btn-danger btnIzbaciIzKorpe">Izbaci</button>
                                </div>
                                </td>
                            </tr>`,ispisDivFinalnaCena(t+=o.cena.trenutnaCena*r.kolicina),console.log(t));i+=`
        </tbody>
        </table>`,document.getElementById("korpaTabela").innerHTML=i}}function ispisDivFinalnaCena(a){document.getElementById("divfinalno").classList.remove("d-none");let e=`
        <h2>Ukupna cena:</h2>
        <span id="cenaTotal" class='fs-3 fw-bold'>${obradaCene(a)}</span>
        <button id="btnPoruci" class="btn btn-success">Poručite</button> `;document.getElementById("divfinalno").innerHTML=e}function izbrisiProizvod(a){lsSet("korpa",lsGet("korpa").filter(e=>e.id!=a)),brProizvodaUkorpi(),ispisKorpe()}function povecaj(a){let e=lsGet("korpa");for(let i of e)i.id==a&&(i.kolicina++,lsSet("korpa",e));ispisKorpe()}function smanji(a){let e=lsGet("korpa");for(let i of e)i.id==a&&(i.kolicina<=1?i.kolicina:(i.kolicina--,lsSet("korpa",e)));ispisKorpe()}function osveziKorpu(){ispisKorpe()}function brProizvodaUkorpi(){let a=lsGet("korpa");if(null==a)return document.getElementById("cartItemsCounter").innerHTML=0,0;{let e=0;return a.forEach(a=>{e++}),document.getElementById("cartItemsCounter").innerHTML=e,e}}function ispisKontakt(){let a=`
                <h3>Dobrodošli na stranicu za slanje tiketa.</h3>
                <hr />
                <p class='ms-3'>Ovo je stranica gde možete poslati informacije o Vašem uređaju i proveriti dostupnost naših usluga po gradovima</p> `;document.getElementById("contactinfo").innerHTML=a}function ispitajEmail(a,e){/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a)?(e.classList.remove("text-danger"),e.classList.add("text-success"),e.innerHTML="email poslat!"):e.innerHTML="Pogresan format emaila. primer: petar.petrovic@gmail.com"}function proveraForme(a){a.preventDefault();let e=[],i=$("#tbUser").val(),t=$("#tbUserEmail").val(),o=$("#ddlGradovi").val(),r=$("#ddlProizvodjaci").val(),n=$("#taOpis").val(),s=document.getElementById("cbTos").checked,l=document.getElementById("tbEmailError"),d=document.getElementById("tbUserError"),c=document.getElementById("ddlGradoviError"),p=document.getElementById("ddlProizvodjaciError"),v=document.getElementById("taError"),u=document.getElementById("cbTosError"),k=document.getElementById("uspesnoPoslato");/^(?=.{8,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/.test(i)?l.innerHTML="":(l.classList.add("text-danger"),l.innerHTML="Pogrešno korisničko ime.",e.push("greska user")),/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)?d.innerHTML="":(d.classList.add("text-danger"),d.innerHTML="Pogrešan email.",e.push("greska email")),0==o?(c.classList.add("text-danger"),c.innerHTML="Izaberite grad.",e.push("greska gradovi")):c.innerHTML="",0==r?(p.classList.add("text-danger"),p.innerHTML="Izaberite grad.",e.push("greska proizvodjaci")):p.innerHTML="",n.length<15?(v.classList.add("text-danger"),v.innerHTML="Dajte malo detaljniji opis.",e.push("greska ta")):v.innerHTML="",s?u.innerHTML="":(u.classList.add("text-danger"),u.innerHTML="Morate se složiti sa uslovima korišćenja",e.push("greska cb")),0==e.length&&(k.classList.add("text-success","fs-3"),k.innerHTML="Tiket poslat.")}let btnPrijavaNl=document.getElementById("btnPrijavaNl");btnPrijavaNl.addEventListener("click",function(){let a;ispitajEmail(document.getElementById("tbEmailNl").value,document.getElementById("emailNlErr"))});